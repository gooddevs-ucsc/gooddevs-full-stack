// let's imagine this file is autogenerated from the backend
// ideally, we want to keep these api related types in sync
// with the backend instead of manually writing them out

export type BaseEntity = {
  id: string;
  created_at: number;
};

export type Entity<T> = {
  [K in keyof T]: T[K];
} & BaseEntity;

export type Meta = {
  page: number;
  total: number;
  totalPages: number;
};

export type Paginated<T> = {
  data: T[];
  meta: Meta;
};

export type User = Entity<{
  firstname: string;
  lastname: string;
  email: string;
  role: 'ADMIN' | 'SPONSOR' | 'VOLUNTEER' | 'REQUESTER';
  bio: string;
}>;

export type AuthResponse = {
  jwt: string;
  user: User;
};

export type Team = Entity<{
  name: string;
  description: string;
}>;

export type Comment = {
  id: string;
  body: string;
  thread_id: string;
  author_id: string;
  created_at: string;
  updated_at: string;
  author: User;
  replies: Reply[];
};

export type Reply = {
  id: string;
  body: string;
  parent_id: string;
  author_id: string;
  created_at: string;
  updated_at: string;
  author: User;
};

export type ProjectThread = {
  id: string;
  title: string;
  body: string;
  author_id: string;
  project_id: string;
  created_at: string;
  updated_at: string;
  author: User;
  comments: Comment[];
};

/**
 * Project-related enums that match the backend models
 */
export const PROJECT_TYPES = {
  WEBSITE: 'WEBSITE',
  MOBILE_APP: 'MOBILE_APP',
  DATABASE: 'DATABASE',
  API: 'API',
  DESKTOP_APP: 'DESKTOP_APP',
  OTHER: 'OTHER',
} as const;

export const ESTIMATED_TIMELINES = {
  LESS_THAN_1_MONTH: 'LESS_THAN_1_MONTH',
  ONE_TO_THREE_MONTHS: 'ONE_TO_THREE_MONTHS',
  THREE_TO_SIX_MONTHS: 'THREE_TO_SIX_MONTHS',
  MORE_THAN_SIX_MONTHS: 'MORE_THAN_SIX_MONTHS',
} as const;

export type ProjectType = (typeof PROJECT_TYPES)[keyof typeof PROJECT_TYPES];
export type EstimatedTimeline =
  (typeof ESTIMATED_TIMELINES)[keyof typeof ESTIMATED_TIMELINES];

/**
 * UI Select options for forms
 */
export const PROJECT_TYPE_OPTIONS = [
  { label: 'Select a project type...', value: '' },
  { label: 'Website Development', value: PROJECT_TYPES.WEBSITE },
  { label: 'Mobile App', value: PROJECT_TYPES.MOBILE_APP },
  { label: 'API Development', value: PROJECT_TYPES.API },
  { label: 'Database Design', value: PROJECT_TYPES.DATABASE },
  { label: 'Desktop Application', value: PROJECT_TYPES.DESKTOP_APP },
  { label: 'Other', value: PROJECT_TYPES.OTHER },
];

export const ESTIMATED_TIMELINE_OPTIONS = [
  { label: 'Select timeline...', value: '' },
  { label: 'Less than 1 month', value: ESTIMATED_TIMELINES.LESS_THAN_1_MONTH },
  { label: '1-3 months', value: ESTIMATED_TIMELINES.ONE_TO_THREE_MONTHS },
  { label: '3-6 months', value: ESTIMATED_TIMELINES.THREE_TO_SIX_MONTHS },
  {
    label: 'More than 6 months',
    value: ESTIMATED_TIMELINES.MORE_THAN_SIX_MONTHS,
  },
];

/**
 * Project-related types that match the backend models
 */
export type Project = Entity<{
  id: string;
  title: string;
  description: string;
  project_type: ProjectType;
  preferred_technologies: string | null;
  estimated_timeline: EstimatedTimeline | null;
  created_at: string;
  updated_at: string;
  requester_id: string;
  status: string;
}>;

// task types
export enum TaskStatus {
  TODO = 'TODO',
  IN_PROGRESS = 'IN_PROGRESS',
  COMPLETED = 'COMPLETED',
  CANCELLED = 'CANCELLED',
}

export enum TaskPriority {
  LOW = 'LOW',
  MEDIUM = 'MEDIUM',
  HIGH = 'HIGH',
  URGENT = 'URGENT',
}

export interface Task {
  id: string;
  project_id: string;
  title: string;
  description?: string;
  status: TaskStatus;
  priority: TaskPriority;
  estimated_hours?: number;
  actual_hours?: number;
  due_date?: string;
  assignee_id?: string;
  assignee?: User;
  created_at: string;
  updated_at: string;
}

export interface TaskCreate {
  title: string;
  description?: string;
  status?: TaskStatus;
  priority?: TaskPriority;
  estimated_hours?: number;
  actual_hours?: number;
  due_date?: string;
  assignee_id?: string;
}

export interface TaskUpdate {
  title?: string;
  description?: string;
  status?: TaskStatus;
  priority?: TaskPriority;
  estimated_hours?: number;
  actual_hours?: number;
  due_date?: string;
  assignee_id?: string;
}

export interface TasksResponse {
  data: Task[];
  meta: Meta;
}

export interface TaskResponse {
  data: Task;
}

// Project Application types
export const APPLICATION_STATUS = {
  PENDING: 'PENDING',
  APPROVED: 'APPROVED',
  REJECTED: 'REJECTED',
  WITHDRAWN: 'WITHDRAWN',
} as const;

export const DEVELOPER_ROLES = {
  FRONTEND: 'FRONTEND',
  BACKEND: 'BACKEND',
  FULLSTACK: 'FULLSTACK',
  UIUX: 'UIUX',
  MOBILE: 'MOBILE',
  DEVOPS: 'DEVOPS',
  QA: 'QA',
  PM: 'PM',
} as const;

export type ApplicationStatus =
  (typeof APPLICATION_STATUS)[keyof typeof APPLICATION_STATUS];
export type DeveloperRole =
  (typeof DEVELOPER_ROLES)[keyof typeof DEVELOPER_ROLES];

export const DEVELOPER_ROLE_OPTIONS = [
  { label: 'Select your role...', value: '' },
  { label: 'Frontend Developer', value: DEVELOPER_ROLES.FRONTEND },
  { label: 'Backend Developer', value: DEVELOPER_ROLES.BACKEND },
  { label: 'Full-Stack Developer', value: DEVELOPER_ROLES.FULLSTACK },
  { label: 'UI/UX Designer', value: DEVELOPER_ROLES.UIUX },
  { label: 'Mobile Developer', value: DEVELOPER_ROLES.MOBILE },
  { label: 'DevOps Engineer', value: DEVELOPER_ROLES.DEVOPS },
  { label: 'QA Engineer', value: DEVELOPER_ROLES.QA },
  { label: 'Project Manager', value: DEVELOPER_ROLES.PM },
];

export interface ProjectApplication {
  id: string;
  project_id: string;
  volunteer_id: string;
  volunteer_role: DeveloperRole;
  cover_letter?: string;
  skills?: string;
  experience_years?: number;
  portfolio_url?: string;
  linkedin_url?: string;
  github_url?: string;
  status: ApplicationStatus;
  created_at: string;
  updated_at: string;
  volunteer?: User;
  project?: Project;
}

export interface ProjectApplicationCreate {
  volunteer_role: DeveloperRole;
  cover_letter?: string;
  skills?: string;
  experience_years?: number;
  portfolio_url?: string;
  linkedin_url?: string;
  github_url?: string;
}

export interface ProjectApplicationUpdate {
  volunteer_role?: DeveloperRole;
  cover_letter?: string;
  skills?: string;
  experience_years?: number;
  portfolio_url?: string;
  linkedin_url?: string;
  github_url?: string;
  status?: ApplicationStatus;
}

export interface ProjectApplicationResponse {
  data: ProjectApplication;
}

export interface ProjectApplicationsResponse {
  data: ProjectApplication[];
  meta: Meta;
}
